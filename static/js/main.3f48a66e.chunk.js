(this.webpackJsonpyearone_takehome=this.webpackJsonpyearone_takehome||[]).push([[0],{32:function(e,t,n){},34:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var i=n(5),a=n.n(i),c=n(26),s=n.n(c),o=(n(32),n(11)),r=n.n(o),l=n(12),u=n(10),d=(n(34),n(13)),j=n.n(d),b={apiKey:"16ff66b6a4fe255819100131f3826554",config:{apiKey:"AIzaSyCbIlRaUHjWYWfWseREHjGYQu8sMOQdnu0",authDomain:"yearone-takehome.firebaseapp.com",databaseURL:"https://yearone-takehome.firebaseio.com",projectId:"yearone-takehome",storageBucket:"yearone-takehome.appspot.com",messagingSenderId:"113496552704405171831"}},p=n(2);var h=function(e){var t=e.movie,n=t.title,i=t.poster,a=t.overview,c=e.idx,s=e.setSingleMovie,o=e.movies;return Object(p.jsxs)("div",{className:"singleMoviePreviewContainer",onClick:function(){return s(o[c])},children:[Object(p.jsx)("img",{src:i?"https://image.tmdb.org/t/p/original/".concat(i):"https://image.shutterstock.com/image-vector/no-image-available-vector-illustration-260nw-744886198.jpg",width:"100",alt:"movie poster",className:"posterPreview"}),Object(p.jsxs)("div",{className:"titleAboutConatiner",children:[Object(p.jsx)("h3",{className:"titlePreview",children:n}),Object(p.jsx)("p",{className:"overviewPreview",children:a})]})]},c)},v=n(16);n(53),n(58),n(57);v.a.initializeApp(b.config);var m=v.a.firestore().collection("movies");var g=function(e){var t=e.movie,n=e.setMovie,a=Object(i.useState)(""),c=Object(u.a)(a,2),s=c[0],o=c[1],d=Object(i.useState)(0),h=Object(u.a)(d,2),v=h[0],g=h[1],f=Object(i.useState)(0),O=Object(u.a)(f,2),x=O[0],k=O[1],w=Object(i.useState)(!1),y=Object(u.a)(w,2),N=y[0],C=y[1];return console.log("movie: ",t),Object(i.useEffect)((function(){(function(){var e=Object(l.a)(r.a.mark((function e(){var n,i,a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api.themoviedb.org/3/movie/".concat(t.id,"/credits?api_key=").concat(b.apiKey,"&append_to_response=credits"),e.next=3,j.a.get(n);case 3:i=e.sent,a=i.data,(c=a.crew.find((function(e){return"Director"===e.job})))&&o(c.name);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(i.useEffect)((function(){m.doc("".concat(t.id)).get().then((function(e){e.exists?(g(e.data().likes),k(e.data().dislikes),C(!0)):m.doc("".concat(t.id)).set({likes:0,dislikes:0}).then((function(){console.log("new movie created"),C(!0)}))})).catch((function(e){console.log("error: ",e)}))}),[t.id]),Object(i.useEffect)((function(){var e=m.doc("".concat(t.id));N&&e.update({likes:v,dislikes:x})}),[v,x,t.id,N]),Object(p.jsx)("div",{children:Object(p.jsxs)("div",{id:"singleMovieContainer",children:[Object(p.jsx)("button",{type:"button",onClick:function(){return n(null)},className:"exitSingleMovieButton",children:"X"}),Object(p.jsx)("img",{className:"singleMoviePoster",src:t.poster?"https://image.tmdb.org/t/p/original/".concat(t.poster):"https://image.shutterstock.com/image-vector/no-image-available-vector-illustration-260nw-744886198.jpg",alt:"movie poster"}),Object(p.jsxs)("div",{id:"singleMovieContentContainer",children:[Object(p.jsx)("h1",{className:"singleMovieTitle",children:t.title}),Object(p.jsx)("h3",{children:s.length?"Directed by ".concat(s):"Director not listed"}),Object(p.jsx)("p",{className:"singleMovieReleaseYear",children:t.releaseDate?"Released ".concat(t.releaseDate):"Release date unknown"}),Object(p.jsxs)("div",{className:"ratingsContainer",children:[Object(p.jsxs)("div",{className:"feedbackContainer",children:[Object(p.jsx)("button",{type:"button",onClick:function(){v>0&&g(v-1)},disabled:!N,className:"ratingsButton",children:"-"}),Object(p.jsxs)("span",{className:"ratingsSpan",children:["\ud83d\udc4d ",v]}),Object(p.jsx)("button",{type:"button",onClick:function(){return g(v+1)},disabled:!N,className:"ratingsButton",children:"+"})]}),Object(p.jsxs)("div",{className:"feedbackContainer",children:[Object(p.jsx)("button",{type:"button",onClick:function(){x>0&&k(x-1)},disabled:!N,className:"ratingsButton",children:"-"}),Object(p.jsxs)("span",{className:"ratingsSpan",children:["\ud83d\udc4e ",x]}),Object(p.jsx)("button",{type:"button",onClick:function(){return k(x+1)},disabled:!N,className:"ratingsButton",children:"+"})]})]}),Object(p.jsx)("p",{className:"singleMovieOverview",children:t.overview})]})]})})},f=n.p+"static/media/film.966fd9bd.png";var O=function(){var e=Object(i.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(i.useState)(""),s=Object(u.a)(c,2),o=s[0],d=s[1],v=Object(i.useState)(null),m=Object(u.a)(v,2),O=m[0],x=m[1];return Object(i.useEffect)((function(){var e=function(){var e=Object(l.a)(r.a.mark((function e(){var t,n,i,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(null),t="https://api.themoviedb.org/3/search/movie?api_key=".concat(b.apiKey,"&language=en-US&query=").concat(o,"&include_adult=false"),e.next=4,j.a.get(t);case 4:n=e.sent,i=n.data,(c=i.results.reduce((function(e,t){return"en"===t.original_language&&e.push({id:t.id,title:t.title,poster:t.poster_path,overview:t.overview,popularity:t.popularity,releaseDate:t.release_date?t.release_date.slice(0,4):null}),e}),[])).sort((function(e,t){return t.popularity-e.popularity})),a(c);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();o.length?e():a([])}),[o]),Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)("div",{id:"titleBar",children:Object(p.jsxs)("div",{id:"titleBarContents",children:[Object(p.jsxs)("div",{id:"titleLogo",children:[Object(p.jsx)("img",{width:"50",src:f,alt:"atom"}),Object(p.jsx)("h3",{id:"titleText",children:"Movie DB Search"})]}),Object(p.jsx)("a",{href:"https://github.com/PeterCrosta/YearOne_TakeHome",target:"_blank",rel:"noopener noreferrer",children:Object(p.jsx)("img",{src:"https://www.sferalabs.cc/wp-content/uploads/github-logo-white.png",alt:"github logo",className:"githubIcon"})})]})}),Object(p.jsx)("form",{className:"searchBar",children:Object(p.jsx)("input",{type:"text",className:"searchBarInput",placeholder:"Enter movie name",value:o,onChange:function(e){return d(e.target.value)}})}),O?Object(p.jsx)(g,{movie:O,setMovie:x}):n.map((function(e,t){return Object(p.jsx)(h,{movie:e,idx:t,setSingleMovie:x,movies:n})}))]})},x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,59)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),i(e),a(e),c(e),s(e)}))};s.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(O,{})}),document.getElementById("root")),x()}},[[56,1,2]]]);
//# sourceMappingURL=main.3f48a66e.chunk.js.map